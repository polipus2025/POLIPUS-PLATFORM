<!DOCTYPE html>
<html>
<head>
    <title>Test Polipus - Simple</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { 
            font-family: system-ui; 
            margin: 0; 
            padding: 20px; 
            background: #0f172a; 
            color: white; 
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            text-align: center; 
        }
        .success { 
            background: #059669; 
            padding: 20px; 
            border-radius: 8px; 
            margin: 20px 0; 
        }
        .test-button {
            background: #0ea5e9;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
        }
        .test-button:hover {
            background: #0284c7;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåø Polipus Platform - Simple Test</h1>
        <div class="success">
            <h2>‚úÖ Basic HTML/CSS Working</h2>
            <p>Server is responding correctly</p>
        </div>
        
        <div style="margin: 30px 0;">
            <button class="test-button" onclick="testJS()">Test JavaScript</button>
            <button class="test-button" onclick="testLocalStorage()">Test LocalStorage</button>
            <button class="test-button" onclick="testServiceWorker()">Test ServiceWorker</button>
        </div>
        
        <div id="test-output" style="background: #1e293b; padding: 20px; border-radius: 8px; min-height: 100px; text-align: left;">
            <strong>Test Output:</strong><br>
            <span id="output-text">Click a test button above...</span>
        </div>
        
        <div style="margin-top: 30px;">
            <a href="/" style="color: #0ea5e9; text-decoration: none;">‚Üê Back to Main App</a>
        </div>
    </div>

    <script>
        function log(message) {
            const output = document.getElementById('output-text');
            output.innerHTML += '<br>' + new Date().toLocaleTimeString() + ': ' + message;
        }

        function testJS() {
            document.getElementById('output-text').innerHTML = '';
            log('üß™ Testing JavaScript functionality...');
            
            try {
                // Test basic JS features
                const testObj = { name: 'Polipus', version: '1.0' };
                log('‚úÖ Object creation works');
                
                const testArray = [1, 2, 3].map(x => x * 2);
                log('‚úÖ Array methods work: ' + testArray.join(','));
                
                // Test async/await
                (async () => {
                    log('‚úÖ Async/await syntax works');
                })();
                
                // Test fetch
                fetch('/api/test', { method: 'HEAD' })
                    .then(() => log('‚úÖ Fetch API available'))
                    .catch(() => log('‚ö†Ô∏è Fetch had an issue (normal if endpoint missing)'));
                    
                log('‚úÖ All JavaScript tests passed');
            } catch (error) {
                log('‚ùå JavaScript error: ' + error.message);
            }
        }

        function testLocalStorage() {
            document.getElementById('output-text').innerHTML = '';
            log('üß™ Testing LocalStorage...');
            
            try {
                localStorage.setItem('test-polipus', 'working');
                const value = localStorage.getItem('test-polipus');
                if (value === 'working') {
                    log('‚úÖ LocalStorage read/write works');
                } else {
                    log('‚ùå LocalStorage value mismatch');
                }
                localStorage.removeItem('test-polipus');
                log('‚úÖ LocalStorage cleanup complete');
            } catch (error) {
                log('‚ùå LocalStorage error: ' + error.message);
            }
        }

        function testServiceWorker() {
            document.getElementById('output-text').innerHTML = '';
            log('üß™ Testing Service Worker...');
            
            if ('serviceWorker' in navigator) {
                log('‚úÖ Service Worker API available');
                
                navigator.serviceWorker.getRegistrations()
                    .then(registrations => {
                        log('üìã Found ' + registrations.length + ' service worker registrations');
                        registrations.forEach((reg, index) => {
                            log('SW ' + (index + 1) + ': ' + reg.scope);
                        });
                    })
                    .catch(error => {
                        log('‚ùå Service Worker registration check failed: ' + error.message);
                    });
            } else {
                log('‚ùå Service Worker not supported in this browser');
            }
        }

        // Auto-run basic test on load
        window.addEventListener('load', () => {
            log('üåü Page loaded successfully');
            log('üåê User Agent: ' + navigator.userAgent.substring(0, 50) + '...');
        });
    </script>
</body>
</html>